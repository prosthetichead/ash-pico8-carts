pico-8 cartridge // http://www.pico-8.com
version 42
__lua__
function _init()
 plr = {
 	gx = 0,
 	gy = 0,
 	menu=false,
 }
 --setup grid
 rows = 14
	cols = 15
	grid = {}
	for i = 0, cols do
		grid[i] = {}
		for j = 0, rows do
			grid[i][j] = {
				s = 3,
				w = true
			}
		end
	end
end

function _update()
 if(not plr.menu) then
  if(btnp(1)) then
  	plr.gx += 1
  elseif(btnp(0)) then
  	plr.gx -= 1
  elseif(btnp(2)) then
   plr.gy -= 1
  elseif(btnp(3)) then
   plr.gy += 1
  elseif(btnp(4)) then
  	plr.menu=true
  end
  plr.gy = mid(0,plr.gy,rows)
  plr.gx = mid(0,plr.gx,cols)
 else
 	
 end
end

function _draw()
	cls()
	for xi = 0, cols do
		for yi = 0, rows do
			cell = grid[xi][yi]
			spr(cell.s, (xi)*8, (yi)*8)
  end
 end    
	
	--draw player
	spr(1, plr.gx*8, plr.gy*8)
	
	print("plr "..plr.gx, 10, 122, 10)
	
end


-->8
--enemy


function spawn_enemy()
  local side = flr(rnd(4)) -- pick random side (0-3)
  
  if side == 0 then -- top
    enemy_x = rnd(128)
    enemy_y = 0
  elseif side == 1 then -- right
    enemy_x = 128
    enemy_y = rnd(128)
  elseif side == 2 then -- bottom
    enemy_x = rnd(128)
    enemy_y = 128
  else -- left
    enemy_x = 0
    enemy_y = rnd(128)
  end
end
__gfx__
000000007707707777000077bbb3bb3bbb5555bb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000007000000770000007bbbbbbbbb5dddd5b0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
007007000000000000000000b3bbbbbb5dddddd50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000770007000000700000000bbb3b3bb5dddddd50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0007700070000007000000003bbbbbbb5dddddd50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
007007000000000000000000bbbbbb3b5dddddd50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000007000000770000007bb3b3bbbb5dddd5b0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000007707707777000077bbbbbbb3bb5555bb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0303030303030303030303030303030300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030303030303030303030303030300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030303030303030303030303030300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030303030303030303030303030300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030303030303030303030303030300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030303030303030303030303030300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030303030303030303030303030300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030303030303030303030303030300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030303030303030303030303030300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
